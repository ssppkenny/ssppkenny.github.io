{"version":3,"sources":["pz15/views.cljs"],"mappings":"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","names":["pz15.views/dispatch-keypress-rules","re-frame.core/dispatch","pz15.views/dispatch-keydown-rules","pz15.views/dispatch-events","events","js/console","c__11670__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__11671__auto__","switch__11573__auto__","state_13641","state_val_13642","inst_13638","inst_13639","cljs.core.async.impl.ioc-helpers/return-chan","statearr-13648","state-machine__11574__auto__","ret-value__11575__auto__","result__11576__auto__","cljs.core/keyword-identical?","ex__11577__auto__","e13649","statearr-13650","cljs.core/seq","statearr-13651","cljs.core/first","state__11672__auto__","statearr-13652","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs.core.dorun","cljs.core.map","pz15.views/main-panel","state","re_frame.core.subscribe","solution","need-to-solve","field","reagent.core.create_class","cljs.core/deref","pz15.bfs/states-to-events","pz15.bfs/bfs","iter__5523__auto__","s__13656","cljs.core/LazySeq","temp__5804__auto__","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__13658","cljs.core/chunk-buffer","i__13657","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__13655","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","l","cljs.core/random-uuid","s__13660","b__13662","i__13661","vec__13663","cljs.core.nth","iter__13659","vec__13666","s__13670","b__13672","i__13671","vec__13673","iter__13669","vec__13676","n","i","cljs.core._EQ_","pz15.bfs/target-state","cljs.core/chunk-first"],"sourcesContent":["(ns pz15.views\n  (:require\n   [re-frame.core :as re-frame]\n   [re-pressed.core :as rp]\n   [reagent.core :as reagent]\n   [clojure.core.async :as ca]\n   [pz15.events :as events]\n   [pz15.subs :as subs]\n   [pz15.db :as db]\n   [pz15.bfs :as bfs]\n   ))\n\n(defn dispatch-keypress-rules []\n  (re-frame/dispatch\n   [::rp/set-keypress-rules\n    {:event-keys [\n                  [[::events/key-left \"\"]\n                   [{:keyCode 72} ;;\n                    ]]\n                  [[::events/key-right \"\"]\n                   [{:keyCode 76} ;; \n                    ]]\n                  [[::events/key-up \"\"]\n                   [{:keyCode 75} ;; \n                    ]]\n                  [[::events/key-down \"\"]\n                   [{:keyCode 74} ;; \n                    ]]\n                  ]\n\n     :clear-keys\n     [[{:keyCode 27} ;; escape\n       ]]}]))\n(defn dispatch-keydown-rules []\n  (re-frame/dispatch\n   [::rp/set-keydown-rules\n    {:event-keys [\n                  [[::events/shuffle \"\"]\n                   [{:keyCode 32} ;;\n                    ]\n                   ]\n                  [[::events/key-left \"\"]\n                   [{:keyCode 72} ;;\n                    ]\n                   [{:keyCode 37} ;;\n                    ]\n                   ]\n                  [[::events/key-right \"\"]\n                   [{:keyCode 76} ;; \n                    ]\n                   [{:keyCode 39} ;; \n                    ]\n                   ]\n                  [[::events/key-up \"\"]\n                   [{:keyCode 75} ;; \n                    ]\n                   [{:keyCode 38} ;; \n                    ]\n                   ]\n                  [[::events/solve \"\"]\n                   [{:keyCode 83} ;; \n                    ]\n                   ]\n                  [[::events/key-down \"\"]\n                   [{:keyCode 74} ;; \n                    ]\n                   [{:keyCode 40} ;; \n                    ]\n                   ]\n                  ]\n\n     :clear-keys\n     [[{:keyCode 27} ;; escape\n       ]]}]))\n\n\n(defn dispatch-events [events]\n  (.log js/console \"dispatching events\")\n  (ca/go \n    (dorun (map re-frame/dispatch events))\n  ))\n\n\n(defn main-panel []\n  (let [state (re-frame/subscribe [::subs/state])\n         solution (re-frame/subscribe [::subs/solution])\n         need-to-solve (re-frame/subscribe [::subs/need-to-solve])\n        ]\n    (let [field state]\n      (reagent/create-class\n       {:component-did-mount\n         (fn [] (dispatch-keydown-rules)\n           )\n        :reagent-render\n         (fn []\n         (let [\n         solution (if @need-to-solve \n                  (bfs/states-to-events (bfs/bfs @state)) [])\n               ]\n           (.log js/console @need-to-solve)\n           (dispatch-events solution)\n        [:div {:style {:margin-left \"35%\" :margin-top \"10%\"}} \n        (for [l (:board @field)]\n          ^{:key (random-uuid)} [:div {:style {:display \"flex\" :width \"100%\" :height \"55px\" :text-align \"center\"}} (for [[n i] l]\n            ^{:key (random-uuid)} [:div {:display \"inline-block\" :style {:width \"50px\" :border-style \"solid\" :border-width \"2px\" :color \"black\" :margin \"0px\"}} \n             (if (= n 0) \"\" (str n))\n             ]\n            )]\n          )\n         [:div {:style {:margin-top \"1%\" :margin-left \"6%\" :color \"green\"}} (if (= @field bfs/target-state) \"Solved!!!\" \"\")] \n         ] \n        )\n        )\n         })\n      )\n    )\n  )\n"]}