{"version":3,"sources":["pz15/views.cljs"],"mappings":"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","names":["pz15.views/dispatch-keypress-rules","re-frame.core/dispatch","pz15.views/dispatch-keydown-rules","pz15.views/send-key-event","e","solving","cljs.core/not","pz15.views/send-shuffle","pz15.views/main-panel","state","re_frame.core.subscribe","field","reagent.core.create_class","cljs.core/deref","show-progress","iter__5523__auto__","s__15513","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__15515","cljs.core/chunk-buffer","i__15514","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__15512","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","l","cljs.core/random-uuid","s__15517","b__15519","i__15518","vec__15520","cljs.core.nth","iter__15516","vec__15523","s__15527","b__15529","i__15528","vec__15530","iter__15526","vec__15533","n","i","cljs.core._EQ_","pz15.bfs/target-state","cljs.core/chunk-first"],"sourcesContent":["(ns pz15.views\n  (:require\n   [re-frame.core :as re-frame]\n   [re-pressed.core :as rp]\n   [reagent.core :as reagent]\n   [clojure.core.async :as ca]\n   [pz15.events :as events]\n   [pz15.subs :as subs]\n   [pz15.db :as db]\n   [pz15.bfs :as bfs]))\n\n(defn dispatch-keypress-rules []\n  (re-frame/dispatch\n   [::rp/set-keypress-rules\n    {:event-keys [[[::events/key-left 1]\n                   [{:keyCode 72} ;;\n                    ]]\n                  [[::events/key-right 1]\n                   [{:keyCode 76} ;; \n                    ]]\n                  [[::events/key-up 1]\n                   [{:keyCode 75} ;; \n                    ]]\n                  [[::events/key-down 1]\n                   [{:keyCode 74} ;; \n                    ]]]\n     :clear-keys\n     [[{:keyCode 27} ;; escape\n       ]]}]))\n(defn dispatch-keydown-rules []\n  (re-frame/dispatch\n   [::rp/set-keydown-rules\n    {:event-keys [[[::events/shuffle 1]\n                   [{:keyCode 32} ;;\n                    ]]\n                  [[::events/key-left 1]\n                   [{:keyCode 72} ;;\n                    ]\n                   [{:keyCode 37} ;;\n                    ]]\n                  [[::events/key-right 1]\n                   [{:keyCode 76} ;; \n                    ]\n                   [{:keyCode 39} ;; \n                    ]]\n                  [[::events/key-up 1]\n                   [{:keyCode 75} ;; \n                    ]\n                   [{:keyCode 38} ;; \n                    ]]\n                  [[::events/new-solve 1]\n                   [{:keyCode 83} ;; \n                    ]]\n                  [[::events/key-down 1]\n                   [{:keyCode 74} ;; \n                    ]\n                   [{:keyCode 40} ;; \n                    ]]]\n     :clear-keys\n     [[{:keyCode 27} ;; escape\n       ]]}]))\n\n(defn send-key-event [e solving]\n  (when (not solving)\n    (re-frame/dispatch [e 1]) \n    )\n  )\n\n(defn send-shuffle [solving]\n (when (not solving)\n   (re-frame/dispatch [::events/shuffle 1])\n   ) \n  )\n\n(defn main-panel []\n  (let [state (re-frame/subscribe [::subs/state])\n        solving (re-frame/subscribe [::subs/solving])]\n    (let [field state]\n      (reagent/create-class\n       {:component-did-mount\n        (fn [] (dispatch-keydown-rules))\n        :reagent-render\n        (fn []\n          (let [show-progress @solving]\n            [:div.main-container\n             [:div.title-box [:div.title [:span {:style {:font-size \"25px\"}} \"15 Puzzle\"]]\n              [:div.game-box\n               (for [l (:board @field)]\n                 ^{:key (random-uuid)} [:div.row (for [[n i] l]\n                                                   ^{:key (random-uuid)} [:div.cell\n                                                                          (if (not (= n 0))\n                                                                            [:img {:src (str \"images/t\" n \".png\") :width \"50px\" :height \"50px\"}]\n                                                                            [:img {:src \"images/empty.png\" :width \"50px\" :height \"50px\"}])])])]\n\n              [:div {:style {:display \"inline-block\"}}\n               (if show-progress [:img {:src \"images/wait.gif\" :width \"30px\"}] [:div])]\n              [:div (if (= @field bfs/target-state) \"Solved!!!\" \"\")]\n              [:div {:style {:display \"block\"}}\n               [:img {:src \"images/up.jpg\" :width \"50px\" :on-click (fn [e] (.preventDefault e) (send-key-event ::events/key-up @solving) )}]\n               [:img {:src \"images/down.jpg\" :width \"50px\" :on-click (fn [e] (.preventDefault e) (send-key-event ::events/key-down @solving) )}]\n               [:img {:src \"images/left.jpg\" :width \"50px\" :on-click (fn [e] (.preventDefault e) (send-key-event ::events/key-left @solving) )}]\n               [:img {:src \"images/right.jpg\" :width \"50px\" :on-click (fn [e] (.preventDefault e) (send-key-event ::events/key-right @solving) )}]]\n              [:div {:style {:text-align \"center\"}}\n               [:img {:src \"images/solve.jpg\" :width \"50px\" :on-click (fn [e] (.preventDefault e) (re-frame/dispatch [::events/new-solve 1]))}]\n               [:span \"Press s to solve\"]\n               [:p]\n               [:img {:src \"images/space.png\" :width \"150px\" :on-click (fn [e] (.preventDefault e) (send-shuffle show-progress) )}]\n               [:p]\n               [:span \"Press space to shuffle\"]]]]))}))))\n"]}